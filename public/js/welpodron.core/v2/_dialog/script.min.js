"use strict";(()=>{class i{static#SUPPORTED_ACTIONS=["show","close"];element;once;force;outsideControls;insideControls;dialogAttrObserver;constructor({element:e,config:t={}}){this.element=e,this.once=t.once??null!=this.element.getAttribute("data-dialog-once"),this.force=t.force??null!=this.element.getAttribute("data-dialog-force"),this.outsideControls=[...document.querySelectorAll(`[data-dialog-action][data-dialog-id="${this.element.id}"]:not(#${this.element.id} *)`)],this.insideControls=[...this.element.querySelectorAll(`[data-dialog-action][data-dialog-id="${this.element.id}"]`)],this.dialogAttrObserver=new MutationObserver((e,t)=>{e.forEach(async e=>{var t;"open"===e.attributeName&&(e=e.target).hasAttribute("open")&&(e.removeAttribute("inert"),(t=e.querySelector("[autofocus]"))?t.focus():e.querySelectorAll('button:not([disabled]):not(:scope [data-dialog] *), [href]:not(:scope [data-dialog] *), input:not([type="hidden"]):not([disabled]):not(:scope [data-dialog] *), select:not([disabled]):not(:scope [data-dialog] *), textarea:not([disabled]):not(:scope [data-dialog] *), [tabindex]:not([tabindex="-1"]):not(:scope [data-dialog] *)')[0]?.focus(),this.insideControls.forEach(e=>{e.removeEventListener("click",this.#handleControlClick),e.addEventListener("click",this.#handleControlClick)}),document.body.style.overflow="hidden")})}),this.dialogAttrObserver.observe(this.element,{attributes:!0}),this.element.hasAttribute("open")&&this.element.removeAttribute("inert"),this.element.removeEventListener("close",this.#handleElementClose),this.element.addEventListener("close",this.#handleElementClose),this.outsideControls.forEach(e=>{e.removeEventListener("click",this.#handleControlClick),e.addEventListener("click",this.#handleControlClick)}),this.force&&this.show()}close=()=>{this.element.close("dismiss")};show=()=>{this.element.showModal()};#handleControlClick=e=>{e.preventDefault();var t=e["currentTarget"],o=t.getAttribute("data-dialog-action"),t=t.getAttribute("data-dialog-action-args");return i.#SUPPORTED_ACTIONS.includes(o)&&(o=this[o])instanceof Function?o({args:t,evt:e}):void 0};#handleElementClose=({currentTarget:e})=>{e.setAttribute("inert",""),document.querySelector("dialog[data-dialog][open]")||(document.body.style.overflow=""),this.insideControls.forEach(e=>{e.removeEventListener("click",this.#handleControlClick)}),this.once&&(this.outsideControls.forEach(e=>{e.removeEventListener("click",this.#handleControlClick),e.parentNode?.removeChild(e)}),this.element.removeEventListener("close",this.#handleElementClose),this.element.parentNode?.removeChild(this.element))}}null==window.welpodron&&(window.welpodron={}),window.welpodron.dialog=i,document.addEventListener("DOMContentLoaded",()=>{document.querySelectorAll("dialog[data-dialog]").forEach(e=>{new i({element:e})})},{once:!0})})();
//# sourceMappingURL=script.min.js.map