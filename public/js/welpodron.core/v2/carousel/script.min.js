"use strict";(l=>{if(l.welpodron&&l.welpodron.animate&&!l.welpodron.carousel){var t="data-w-carousel";const a=t+"-id";var e=t+"-item";const o=e+"-id",i=e+"-active",n=e+"-translating-from-left",s=e+"-translating-from-right",r=e+"-translating-to-left",h=e+"-translating-to-right",m=t+"-control",c=m+"-active",u=t+"-action",d=u+"-args";u;class I{supportedActions=["hide","show"];carousel;element;animation=null;constructor({element:t,carousel:e}){this.element=t,this.carousel=e}show=async({args:t})=>{this.animation&&l.clearTimeout(this.animation.timer),null==this.element.getAttribute(i)&&("right"===t?this.element.setAttribute(n,""):"left"===t&&this.element.setAttribute(s,""),this.element.setAttribute(i,""),document.querySelectorAll(`[${d}="${this.element.getAttribute(o)}"][${a}="${this.element.getAttribute(a)}"][${m}]`).forEach(t=>{t.setAttribute(c,"")}),this.element.scrollHeight,this.animation=l.welpodron.animate({element:this.element,callback:()=>{"right"===t?this.element.removeAttribute(n):"left"===t&&this.element.removeAttribute(s)}}),await this.animation?.promise,this.animation=null)};hide=async({args:t})=>{this.animation&&l.clearTimeout(this.animation.timer),null!=this.element.getAttribute(i)&&(this.element.style.display="block",this.animation=l.welpodron.animate({element:this.element,callback:()=>{"right"===t?this.element.setAttribute(h,""):"left"===t&&this.element.setAttribute(r,""),this.element.removeAttribute(i),document.querySelectorAll(`[${d}="${this.element.getAttribute(o)}"][${a}="${this.element.getAttribute(a)}"][${m}]`).forEach(t=>{t.removeAttribute(c)})}}),await this.animation?.promise,this.element.style.removeProperty("display"),"right"===t?this.element.removeAttribute(h):"left"===t&&this.element.removeAttribute(r),this.animation=null)}}class v{supportedActions=["show"];element;touchStartX=0;touchDeltaX=0;swipeThreshold=45;items=[];currentItemIndex=-1;nextItemIndex=-1;constructor({element:t}){this.element=t,document.removeEventListener("click",this.handleDocumentClick),document.addEventListener("click",this.handleDocumentClick),this.element.removeEventListener("touchstart",this.handleElementTouchStart),this.element.addEventListener("touchstart",this.handleElementTouchStart,{passive:!0})}handleDocumentClick=t=>{let e=t["target"];var i,n;if(e&&(e=e.closest(`[${a}="${this.element.getAttribute(a)}"][${m}][${u}]`)))return n=e.getAttribute(u),i=e.getAttribute(d),e.getAttribute("data-w-carousel-action-flush")||t.preventDefault(),n&&this.supportedActions.includes(n)&&(n=this[n])instanceof Function?n({args:i,event:t}):void 0};handleElementTouchStart=t=>{this.element.addEventListener("touchend",this.handleElementTouchEnd,{once:!0}),this.element.removeEventListener("touchmove",this.handleElementTouchMove),this.element.addEventListener("touchmove",this.handleElementTouchMove),this.touchStartX=t.touches[0].clientX};handleElementTouchMove=t=>{this.touchDeltaX=t.touches&&1<t.touches.length?0:t.touches[0].clientX-this.touchStartX};handleElementTouchEnd=t=>{this.element.removeEventListener("touchmove",this.handleElementTouchMove);var e=Math.abs(this.touchDeltaX);e>this.swipeThreshold&&this.show({args:e/this.touchDeltaX<0?"next":"prev",event:t}),this.touchDeltaX=0};getNextItem=async({index:e})=>{this.items&&(-1===this.currentItemIndex&&(this.currentItemIndex=this.items.findIndex(t=>null!=t.element.getAttribute(i))),-1!==this.currentItemIndex)&&(this.nextItemIndex="next"===e?(this.currentItemIndex+1)%this.items.length:"prev"===e?(this.currentItemIndex+this.items.length-1)%this.items.length:this.items.findIndex(t=>t.element.getAttribute(o)===e))};getNextDirection=async()=>{var t;if(-1!==this.nextItemIndex&&-1!==this.currentItemIndex&&this.nextItemIndex!==this.currentItemIndex)return t=this.items.length-1,(this.nextItemIndex!==t||0!==this.currentItemIndex)&&(0===this.nextItemIndex&&this.currentItemIndex===t||this.nextItemIndex>this.currentItemIndex)?"left":"right"};show=async({args:t,event:e})=>{if(t){var i=this.element.getAttribute(a);if(i){i=this.element.querySelectorAll(`[${a}="${i}"][${o}]`);if(i){for(var n of this.items)n.animation&&(l.clearTimeout(n.animation.timer),n.animation.promise.resolve());if(this.items=[...i].map(t=>new I({element:t,carousel:this})),await this.getNextItem({index:t}),-1!==this.nextItemIndex&&-1!==this.currentItemIndex){var s=await this.getNextDirection();if(s){var r=[];for(let t=0;t<this.items.length;t++){var h=this.items[t];t!==this.currentItemIndex&&t===this.nextItemIndex?r.push(h.show({args:s,event:e})):r.push(h.hide({args:s,event:e}))}this.currentItemIndex=this.nextItemIndex,await Promise.allSettled(r)}}}}}}}l.welpodron.carousel=v}})(window);
//# sourceMappingURL=script.min.js.map