!function(o){(o.welpodron||o.welpodron.core)&&(o.welpodron.request=function(e,t={get:"json"}){this.path=e,this.required=t.get||t.required,this.accept="json"===this.required?{Accept:"application/json; charset=UTF-8"}:{Accept:"text/html; charset=UTF-8"},this.before=t.before||(()=>{}),this.onResponse=t.onResponse||(()=>{}),this.after=t.after||(()=>{}),this.finished=o.welpodron.core.deferred()},o.welpodron.request.prototype.post=function(e={}){return this.send({...e,method:"POST"})},o.welpodron.request.prototype.get=function(e={}){return this.send({...e,method:"GET"})},o.welpodron.request.prototype.send=function(e={}){var t={method:e.method,headers:{...e.headers,...this.accept},body:e.body},t={...e,...t};this.before(this.path,t);const r=fetch(this.path,t);return new Promise((t,o)=>{r.then(e=>{if(this.onResponse(e),e.ok)return"json"===this.required?e.json():e.text();throw new Error("HTTP error! status: "+e.status)}).then(e=>{this.after(e),this.finished.resolve(),t(e)}).catch(e=>{this.after(e),this.finished.resolve(),o(e)})})})}(window);
//# sourceMappingURL=script.min.js.map