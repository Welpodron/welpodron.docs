!function(o){o.welpodron&&o.welpodron.animation&&(o.welpodron.modal=function(t={}){this.dom=t.dom||!1,this.lastActiveElement=document.activeElement,this.force=null!==this.dom.getAttribute("data-force"),this.once=null!==this.dom.getAttribute("data-once"),this.focusable=[...this.dom.querySelectorAll('button:not([disabled]):not(:scope [data-modal] *), [href]:not(:scope [data-modal] *), input:not([type="hidden"]):not([disabled]):not(:scope [data-modal] *), select:not([disabled]):not(:scope [data-modal] *), textarea:not([disabled]):not(:scope [data-modal] *), [tabindex]:not([tabindex="-1"]):not(:scope [data-modal] *)')],this.dom.setAttribute("role","dialog"),this.dom.setAttribute("aria-modal","true"),this.handleKeyDown=t=>{var e=[...o.welpodron.modalsActiveList].pop();return"Escape"===t.key?e.hide():"Tab"===t.key?t.shiftKey?e.focusable.length&&document.activeElement===e.focusable[0]?(t.preventDefault(),e.focusable[e.focusable.length-1].focus()):void 0:e.focusable.length&&document.activeElement===e.focusable[e.focusable.length-1]?(t.preventDefault(),e.focusable[0].focus()):void 0:void 0},this.handleClick=t=>{if(t.target===this.dom)return this.hide();var e,t=t.currentTarget;t&&t!==document&&(this.outsideControls.includes(t)&&(this.lastActiveElement=document.activeElement),null!==(e=t.getAttribute("data-action")))&&this[e]&&(t=t.getAttribute("data-args"),this[e](t))},this.outsideControls=[...document.querySelectorAll(`[data-action][data-modal-id="${this.dom.id}"]:not(#${this.dom.id} *)`)],this.insideControls=this.dom.querySelectorAll(`[data-action][data-modal-id="${this.dom.id}"]`),this.outsideControls.forEach(t=>{t.removeEventListener("click",this.handleClick),t.addEventListener("click",this.handleClick)}),this.force&&this.show()},o.welpodron.modal.prototype.show=function(){var t;this.translating||this.active||(this.translating=!0,this.dom.parentNode&&(t=this.dom.parentNode.removeChild(this.dom),document.body.appendChild(t),this.dom=t,t=null),new o.welpodron.animation({duration:400,from:{opacity:0},to:{opacity:1},before:()=>{document.body.style.overflow="hidden",this.dom.style.display="flex"},step:t=>{this.dom.style.opacity=t.props.opacity},after:()=>{this.dom.setAttribute("data-active",""),this.active=!0,this.dom.style.display="",this.dom.style.opacity="",this.focusable.length&&this.focusable[0].focus(),o.welpodron.modalsActiveList.size||(document.removeEventListener("keydown",this.handleKeyDown),document.addEventListener("keydown",this.handleKeyDown)),o.welpodron.modalsActiveList.add(this),this.insideControls.forEach(t=>{t.removeEventListener("click",this.handleClick),t.addEventListener("click",this.handleClick)}),document.removeEventListener("click",this.handleClick),document.addEventListener("click",this.handleClick),this.translating=!1}}).start())},o.welpodron.modal.prototype.hide=function(){!this.translating&&this.active&&(this.translating=!0,new o.welpodron.animation({duration:400,from:{opacity:1},to:{opacity:0},step:t=>{this.dom.style.opacity=t.props.opacity},after:()=>{this.dom.removeAttribute("data-active"),this.active=!1,this.dom.style.opacity="",o.welpodron.modalsActiveList.delete(this),document.removeEventListener("click",this.handleClick),this.insideControls.forEach(t=>{t.removeEventListener("click",this.handleClick)}),o.welpodron.modalsActiveList.size||document.removeEventListener("keydown",this.handleKeyDown),o.welpodron.modalsActiveList.size||(document.body.style.overflow=""),this.lastActiveElement.focus(),this.once&&this.dom.remove(),this.translating=!1}}).start())},o.welpodron.modalsList=[],o.welpodron.modalsActiveList=new Set,document.querySelectorAll("[data-modal]").forEach(t=>{o.welpodron.modalsList.push(new o.welpodron.modal({dom:t}))}))}(window);
//# sourceMappingURL=script.min.js.map